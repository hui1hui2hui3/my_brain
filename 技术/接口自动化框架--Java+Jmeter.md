---
tag:["Java","Jmeter"]
---
## 使用技术
- [[Java]]
- [[Jmeter]]
- [[Ant]]
- [[Maven]]

## 代码架构
1. maven启动java主方法
2. java扩展jmx文件，增强功能，然后启动ant
3. ant启动具体的jmeter
4. jmeter运行后生产jtl回到java
5. java解析jtl生产报告，并发送邮件

## 实现功能
1. 基于xml模板功能，实现jmx功能的扩展
	1. 自动为接口添加动态标题变量（包括业务场景名称和接口名称）
	2. 自动为场景添加失败重试机制
	3. 自动为接口和场景添加数据驱动机制

2. 扩展功能
	1. 接口查重功能
	2. 变量查重功能
	3. 场景查重功能


## 遇到问题
1. 变量作用域覆盖问题，数据驱动变量，自定义变量和paramlized controller以及提取器提取的变量四者之间的变量冲突问题，增加了框架扩展功能变量查重
2. 开发冲突问题，由于大家经常修改同一个jmx文件，导致文件冲突，且由于是xml格式，解决冲突难
3. 脚本调试问题，大家不熟悉框架，运行调试起来麻烦，通过培训解决
4. 脚本业务接口不清楚如何编写，大家不知道如何区分何为关键业务接口，通过培训解决
5. 忘记编写场景名称或接口名称，一般是复制过来忘记更改了，增加了场景查重和去重功能，框架添加编号

## 框架优劣势-如何改进
### 优势
### 劣势
1. 提供web页面在线编辑jmeter文件，而不是使用jmeter直接编辑

### 劣势改进